{# Horizontal bar chart for species distribution #}

{% macro species_horizontal_chart(species_data, max_items=20, show_phylum=true) %}
<div class="species-chart">
    {% for species in species_data[:max_items] %}
    <div class="chart-row">
        <div class="species-info">
            <span class="species-name">{{ species.name }}</span>
            {% if show_phylum and species.phylum %}
                <span class="species-phylum">({{ species.phylum }})</span>
            {% endif %}
        </div>
        <div class="bar-container">
            <div class="bar" style="width: {{ (species.percentage / species_data[0].percentage * 100)|round(1) }}%; background: linear-gradient(90deg, var(--primary-blue), var(--teal));"></div>
            <span class="percentage">{{ "%.2f"|format(species.percentage) }}%</span>
        </div>
    </div>
    {% endfor %}
</div>
{% endmacro %}

{# Simplified species list without chart bars #}
{% macro species_list(species_data, max_items=10) %}
<div class="species-list">
    {% for species in species_data[:max_items] %}
    <div class="species-item">
        <span class="species-name">{{ species.name }}</span>
        <span class="species-percentage">{{ "%.2f"|format(species.percentage) }}%</span>
    </div>
    {% endfor %}
</div>
{% endmacro %}

{# Species chart with custom styling #}
{% macro species_chart_custom(species_data, chart_height="300px", bar_color=None) %}
<div class="species-chart-custom" style="height: {{ chart_height }};">
    {% set max_percentage = species_data[0].percentage if species_data else 0 %}
    {% for species in species_data %}
    <div class="chart-bar-custom">
        <div class="bar-custom" 
             style="height: {{ (species.percentage / max_percentage * 100)|round(1) }}%; 
                    background: {{ bar_color or 'linear-gradient(180deg, var(--primary-blue), var(--teal))' }};"></div>
        <div class="bar-label">
            <span class="species-name-short">{{ species.name[:15] }}...</span>
            <span class="percentage">{{ "%.1f"|format(species.percentage) }}%</span>
        </div>
    </div>
    {% endfor %}
</div>
{% endmacro %}